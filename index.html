<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>命令数据库</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- DataTables CSS -->
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css">
    <style>
        html, body {
            height: 100%;
        }
        body {
            background-image: url('img/background.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            color: #e0e0e0;
            font-family: 'Segoe UI', sans-serif;
            min-height: 100vh;
        }
        .container {
            background: linear-gradient(to bottom right, #667eea, #764ba2);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0,0,0,0.3);
            margin-top: 50px;
            margin-bottom: 50px;
            backdrop-filter: blur(10px);
            overflow-x: auto; /* Add horizontal scroll for small screens */
        }
        .dataTables_length select option {
            background: #e6e6fa; /* Light lavender background */
            color: #212529; /* Dark text for readability */
        }

            text-align: center;
            color: #fff;
            margin-bottom: 2rem;
        }

        .table th,
        .table td {
            vertical-align: middle;
        }

        .category-tag {
            padding: 0.3em 0.6em;
            font-size: 85%;
            font-weight: 600;
            border-radius: 0.375rem;
            color: #212529; /* Dark text for better contrast on light backgrounds */
            display: inline-block;
            text-align: center;
        }
        .table-dark {
            --bs-table-bg: transparent;
            --bs-table-striped-bg: rgba(255, 255, 255, 0.05);
            --bs-table-hover-bg: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.2);
        }
        .dataTables_wrapper .dataTables_length, .dataTables_wrapper .dataTables_filter, .dataTables_wrapper .dataTables_info, .dataTables_wrapper .dataTables_paginate {
            color: #e0e0e0;
        }
        .dataTables_wrapper .dataTables_length select, .dataTables_wrapper .dataTables_filter input {
            background-color: rgba(255, 255, 255, 0.1);
            color: #fff;
            border-color: rgba(255, 255, 255, 0.2);
        }
        .page-link {
            background-color: transparent;
            border-color: rgba(255, 255, 255, 0.2);
            color: #e0e0e0;
        }
        .page-link:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        .page-item.active .page-link {
            background-color: #0d6efd;
            border-color: #0d6efd;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>命令数据库</h1>
    <table id="commandsTable" class="table table-dark table-striped table-hover" style="width:100%">
        <thead>
            <tr>
                <th style="width: 5%;">ID</th>
                <th style="width: 8%;">类别</th>
                <th style="width: 12%;">描述1</th>
                <th style="width: 12%;">描述2</th>
                <th style="width: 38%;">命令</th>
                <th style="width: 15%;">备注</th>
                <th style="width: 10%;">操作</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
</div>

<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.7.0.js"></script>
<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<!-- DataTables JS -->
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>

<script>
$(document).ready(function() {
    const table = $('#commandsTable').DataTable({
        "ajax": {
            "url": "commands.json",
            "dataSrc": ""
        },
        "columns": [
            { "data": "id" },
            {
                "data": "category",
                "render": function(data, type, row) {
                    const colorMap = {
                        'scp': '#a2d2ff',
                        'can': '#e0aaff',
                        'log': '#c8e6c9',
                        'mysql': '#fff3b0',
                        'cmd': '#ffcdd2',
                        'shell': '#bde0fe',
                        '物联网': '#ffdfb3',
                        'python': '#b2f7d2',
                        'git': '#f8bbd0',
                        'kernel': '#cfd8dc'
                    };
                    const color = colorMap[data] || '#cfd8dc'; // Default color
                    return `<span class="category-tag" style="background-color: ${color};">${data}</span>`;
                }
            },
            { "data": "description1", "defaultContent": "<i>N/A</i>" },
            { "data": "description2", "defaultContent": "<i>N/A</i>" },
            { "data": "command" },
            { "data": "comments" },
            {
                "data": null,
                "defaultContent": '<button class="btn btn-primary btn-sm copy-btn">复制</button>',
                "orderable": false
            }
        ],
        "language": {
            "sProcessing": "处理中...",
            "sLengthMenu": "显示 _MENU_ 项结果",
            "sZeroRecords": "没有匹配结果",
            "sInfo": "显示第 _START_ 至 _END_ 项结果，共 _TOTAL_ 项",
            "sInfoEmpty": "显示第 0 至 0 项结果，共 0 项",
            "sInfoFiltered": "(由 _MAX_ 项结果过滤)",
            "sInfoPostFix": "",
            "sSearch": "搜索:",
            "sUrl": "",
            "sEmptyTable": "表中数据为空",
            "sLoadingRecords": "载入中...",
            "sInfoThousands": ",",
            "oPaginate": {
                "sFirst": "首页",
                "sPrevious": "上页",
                "sNext": "下页",
                "sLast": "末页"
            },
            "oAria": {
                "sSortAscending": ": 以升序排列此列",
                "sSortDescending": ": 以降序排列此列"
            }
        },
        "paging": true,
        "searching": true,
        "responsive": true,
        "columnDefs": [
            { "className": "dt-center", "targets": [0, 6] },
            { "className": "text-nowrap", "targets": [0, 1, 2, 3] }
        ],
        "dom": '<"row"<"col-sm-12"f>><"row"<"col-sm-12"tr>><"row mt-3"<"col-sm-12 col-md-5"i><"col-sm-12 col-md-7 d-flex justify-content-end align-items-center"lp>>',
    });

    $('#commandsTable tbody').on('click', '.copy-btn', function () {
        const row = table.row($(this).parents('tr'));
        const data = row.data();
        const commandText = data.command;

        navigator.clipboard.writeText(commandText).then(function() {
            // Success feedback
            const button = $(this);
            const originalText = button.text();
            button.text('已复制!');
            setTimeout(() => {
                button.text(originalText);
            }, 2000);
        }.bind(this), function(err) {
            // Error feedback
            alert('复制失败: ', err);
        });
    });
});
</script>

</body>
</html>
